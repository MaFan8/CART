<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>

</head>

<script src="jQuery/jquery-3.6.0.min.js"></script>

<script>
  $(document).ready(function() {
    $('#btnSearch').show().click(function() {
      Search($("#txtSearchTerm").val(), 0);
    });

    $("#btnSearch").keyup(function(event) {
    if (event.keyCode === 13) {
        this.click(function() {
          Search($("#txtSearchTerm").val(), 0);
          console.log("clicked");
    });
  }
  });


    // $('#lnkPrev').click(function() {
    //   Search($("#txtSearchTerm").val(), -1);
    // });
    // $('#lnkNext').click(function() {
    //   Search($("#txtSearchTerm").val(), 1);
    // });

  });

  let apiKey = 'AIzaSyD4lL9yrVYM9NMXNSv03Qpsth8EPcVKZug';
  let searchEngineID = '2b47b5c86db0b99d5';

  function Search(term, direction) {
    // url = "https://www.googleapis.com/customsearch/v1?key=AIzaSyD4lL9yrVYM9NMXNSv03Qpsth8EPcVKZug&cx=2b47b5c86db0b99d5&q=helloworld";
    url = `https://www.googleapis.com/customsearch/v1?key=${apiKey}&cx=${searchEngineID}&q=${term}`;
    $.getJSON(url, '', SearchCompleted);
    $.getJSON(url, '', function(data) {
      console.log(data);
    });
  }

  function SearchCompleted(response) {
    let html = "";
    for (i = 0; i < response.items.length; i++) {
      html += response.items[i].htmlTitle + "<br />";
    }
    $("#output").html(html);

    console.log(response);
  }

</script>


<body>

  <script async src="https://cse.google.com/cse.js?cx=2b47b5c86db0b99d5"></script>

  <div style="border: 1px solid blue;">
      <div class="gcse-searchbox" enableAutoComplete="true"></div>
  </div>

  <div style="border: 1px solid red;">
      <div class="gcse-searchresults"></div>
  </div>

  <input type="text" id="txtSearchTerm" size="40" />
  <button id="btnSearch" style="display:none;">Start Search</button>

  <div id="searchResult"></div>
  <div id="output"></div>

</body>


</html>

<!-- <html>
  <head>
    <title>JSON Custom Search API Example</title>
  </head>
  <body>
    <div id="content"></div>
    <script>
      function hndlr(response) {
      for (var i = 0; i < response.items.length; i++) {
        var item = response.items[i];
        // in production code, item.htmlTitle should have the HTML entities escaped.
        document.getElementById("content").innerHTML += "<br>" + item.htmlTitle;
      }
    }
    </script>
    <script src="https://www.googleapis.com/customsearch/v1?key=&cx=2b47b5c86db0b99d5:omuauf_lfve&q=cars&callback=hndlr">
    </script>
  </body>
</html> -->
